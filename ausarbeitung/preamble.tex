%!TEX root = qrcode.tex
%!TEX TS-options = -shell-escape
%!BIB programm = biber
\documentclass[%
	paper=a4,
	fontsize=10,
	DIV=13,
	chapterprefix=true,
	headinclude,
	footinclude,
	headheight=.6cm,
	headings=optiontohead,
	toc=bibliography,toc=listof,
	ngerman,
	draft=true,
]{scrbook}
\usepackage{scrtime}
\usepackage{etex}
\usepackage{shellesc}
\usepackage[final]{graphicx}

%-- typografische Verbesserungen, Codierungskram, Schriftwahl und erste Mathepakete
%----------------------------------------------------------------------------------------
\usepackage[utf8]{inputenc}

%-- verschiedene Schriftarten zur Auswahl
% \usepackage[lining,semibold]{libertine}
% \usepackage[proportional,scaled=1.0]{erewhon}
% \usepackage{concmath}
% \usepackage[default]{droidserif}
\usepackage[oldstyle]{XCharter}
% \usepackage[rm]{merriweather}
% \usepackage[default,regular,bold,osf]{sourceserifpro}

%-- Sans- und Mono-Schriftart
% \usepackage[rm,light]{roboto}
\usepackage[scale=0.90]{sourcecodepro}
\usepackage[scale=1.00]{sourcesanspro}
% \usepackage[sb,lining,scale=.92]{FiraSans}
% \usepackage[lining,scale=.87]{FiraMono}

\usepackage[T1]{fontenc}
\usepackage{textcomp} % verhindert ein paar Fehler bei den Fonts
\usepackage[newcommands]{ragged2e} % besserer Flattersatz

\usepackage{mathtools} 
\usepackage[bigdelims]{newtxmath} % Mathe Schriftart
\DeclareMathSymbol{,}{\mathpunct}{operators}{"2C}   % Fix für fehlerhaftes Spacing von Kommas, siehe http://tex.stackexchange.com/a/160790/67086
\usepackage{fontawesome}
\usepackage{babel}
\usepackage[babel=true,final,tracking=smallcaps]{microtype} 
\SetTracking{ encoding = *, shape = sc}{ 45 } % aktiviert ein nicht übertriebenes Tracking von SmallCaps
\DisableLigatures{encoding = T1, family = tt* } % deaktiviere alle Ligaturen für Mono-Spacing-Fonts
\usepackage[german=quotes]{csquotes}
%----------------------------------------------------------------------------------------

%-- Seiteneinrichtung
%----------------------------------------------------------------------------------------
% \setlength\parindent{0pt}             % und ohne Einrueckung
% \setlength\parskip{1.5\medskipamount} % Absaetze abgesetzt
% Das obige in richtig:
% \usepackage{parskip}
%----------------------------------------------------------------------------------------

%-- Konfiguration von Farben
%----------------------------------------------------------------------------------------
\usepackage[usenames,x11names,final]{xcolor} % Die Optionen definieren zusätzliche Farben (siehe Dokumentation)
\definecolor{light_gray}{gray}{0.6}
\definecolor{blackberry}{rgb}{0.53, 0.0, 0.25}
\definecolor{FB_blue}{RGB}{60,89,153}
%----------------------------------------------------------------------------------------

%-- Einrichtung von TikZ
%----------------------------------------------------------------------------------------
\usepackage{tikz}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{arrows.meta}
%----------------------------------------------------------------------------------------

%-- Kopf- und Fußzeilen und allgemeine KOMO-Skript Formatierung
%----------------------------------------------------------------------------------------
\addtokomafont{chapter}{\Huge}
\addtokomafont{chapterprefix}{\LARGE\rmfamily\scshape}
\addtokomafont{captionlabel}{\sffamily\bfseries}
\usepackage[%
	headsepline=1pt,
	automark,
	draft=false,
	]%
{scrlayer-scrpage}
\pagestyle{scrheadings}
% \clearscrheadfoot % Standardkonfiguration löschen
% \setkomafont{pageheadfoot}{\sffamily}
% \renewcommand*\chaptermarkformat{\thechapter\autodot\enskip}
\ohead{\includegraphics[height=0.6 cm,keepaspectratio]{images/wwulogo.pdf}}
\ihead{\rule{0cm}{0.6cm}\headmark}
\ofoot*{\Large\sffamily\thepage}
\ifoot{\color{light_gray}Praktikum Computer Vision}
%----------------------------------------------------------------------------------------

%-- Satzspiegel neu berechnen
%----------------------------------------------------------------------------------------
\KOMAoptions{DIV=last}
%----------------------------------------------------------------------------------------

%-- Konfiguration von Biblatex
%----------------------------------------------------------------------------------------
\usepackage[%
	backend=biber,
	sortlocale=auto,
	natbib,
	hyperref,
	backref,
	style=alphabetic,
	]%
{biblatex}
\renewcommand*{\mkbibnamefamily}[1]{%
  \ifmknamesc{\textsc{#1}}{#1}}

\renewcommand*{\mkbibnameprefix}[1]{%
  \ifboolexpr{ test {\ifmknamesc} and test {\ifuseprefix} }
    {\textsc{#1}}
    {#1}}

\def\ifmknamesc{%
  \ifboolexpr{ test {\ifcurrentname{labelname}}
               or test {\ifcurrentname{author}}
               or ( test {\ifnameundef{author}} and test {\ifcurrentname{editor}} ) }}
\addbibresource{quellen.bib}
%----------------------------------------------------------------------------------------

%-- Konfiguration von Hyperref 
%----------------------------------------------------------------------------------------
\usepackage[%
	hidelinks,
	pdfpagelabels,
	bookmarksopen=true,
	bookmarksnumbered=true,
	linkcolor=black,
	urlcolor=SkyBlue2,
	plainpages=false,
	pagebackref,
	citecolor=black,
	hypertexnames=true,
	pdfborderstyle={/S/U},
	linkbordercolor=SkyBlue2,
	colorlinks=false,
	final,
	backref=false,
	pdfencoding=auto]{hyperref}
\hypersetup{final}
%----------------------------------------------------------------------------------------
	
	
%-- Schöne Emailadressen setzen (nach http://tex.stackexchange.com/a/663/67086)
%----------------------------------------------------------------------------------------
\catcode`\_=11\relax
\newcommand\email[1]{\_email #1\q_nil}
\def\_email#1@#2\q_nil{%
  \href{mailto:#1@#2}{{\emailfont #1\emailampersat #2}}
}
\newcommand\emailfont{\ttfamily}
\newcommand\emailampersat{{\fontsize{10.9pt}{12pt}\selectfont\sffamily@}}
\catcode`\_=8\relax
%----------------------------------------------------------------------------------------

%-- Für Testzwecke, Marginnotes und Todos
%----------------------------------------------------------------------------------------
\usepackage{blindtext}
\usepackage[fulladjust]{marginnote}
\renewcommand*{\marginfont}{\itshape\footnotesize}
\usepackage[textsize=small,obeyDraft,color=Red1!80!OrangeRed1!80]{todonotes}
\renewcommand*{\raggedleftmarginnote}{\RaggedLeft}
\renewcommand*{\raggedrightmarginnote}{\RaggedRight}
\deffootnote[1.5em]{1.5em}{1.5em}{\textsuperscript{\thefootnotemark}\ } % extra Leerzeichen in Fußnote
%----------------------------------------------------------------------------------------

%-- Für Auflistungen und Tabellen
%----------------------------------------------------------------------------------------
\usepackage{multicol}
\usepackage[shortlabels]{enumitem}
\setlist{itemsep=0pt}
\setlist[enumerate]{font=\bfseries}
\setlist[description]{font=\bfseries}
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{longtable}
%----------------------------------------------------------------------------------------

%-- Für Abbildungen
%----------------------------------------------------------------------------------------
\usepackage{subcaption}
%----------------------------------------------------------------------------------------

%-- Listings
%----------------------------------------------------------------------------------------
% -- Bei 'shellesc' Problemen ab hier auskommentieren
\usepackage{tcolorbox}
\tcbuselibrary{breakable}
\tcbuselibrary{listingsutf8}
\tcbuselibrary{skins}
\tcbuselibrary{xparse}
% -- bis hier, stattdessen die folgende Zeile einkommentieren:
% \usepackage{listingsutf8}
\lstset{language=java}

\lstdefinestyle{customJava}{
	belowcaptionskip=1\baselineskip,
	breaklines=true,
	language=java,
	showstringspaces=false,
	basicstyle=\footnotesize\ttfamily,
	keywordstyle=\bfseries\color{green!40!black},
	commentstyle=\itshape\color{purple!40!black},
	identifierstyle=\color{blue},
	stringstyle=\color{orange},
	numbers=right,
	numbersep=1pt,
	numberstyle=\tiny\ttfamily\color{gray},
	inputencoding=utf8/latin1,
	tabsize=4,
}
\lstdefinestyle{jooqJava}{
	belowcaptionskip=1\baselineskip,
	breaklines=true,
	language=java,
	showstringspaces=false,
	basicstyle=\footnotesize\ttfamily,
	keywordstyle=\bfseries\color{green!40!black},
	commentstyle=\itshape\color{purple!40!black},
	identifierstyle=\color{blue},
	stringstyle=\color{orange},
	numbers=right,
	numbersep=1pt,
	numberstyle=\tiny\ttfamily\color{gray},
	inputencoding=utf8/latin1,
	tabsize=4,
	morekeywords={join,on,eq,selectFrom,where,and,orderBy,asc,fetch},
}
\lstdefinestyle{SQL}{
	belowcaptionskip=1\baselineskip,
	breaklines=true,
	language=sql,
	showstringspaces=false,
	basicstyle=\footnotesize\ttfamily,
	keywordstyle=\bfseries\color{green!40!black},
	commentstyle=\itshape\color{purple!40!black},
	identifierstyle=\color{blue},
	stringstyle=\color{orange},
	numbers=right,
	numbersep=1pt,
	numberstyle=\tiny\ttfamily\color{gray},
	inputencoding=utf8/latin1,
	morekeywords={BIGINT,CONFLICT},
}

\lstdefinestyle{customXML}{
	belowcaptionskip=1\baselineskip,
	breaklines=true,
	language=XML,
	showstringspaces=false,
	basicstyle=\footnotesize\ttfamily,
	keywordstyle=\bfseries\color{green!40!black},
	commentstyle=\itshape\color{purple!40!black},
	identifierstyle=\color{blue},
	stringstyle=\color{orange},
	numbers=right,
	numbersep=1pt,
	numberstyle=\tiny\ttfamily\color{gray},
	inputencoding=utf8/latin1,
}

\lstdefinestyle{customHTML}{
	belowcaptionskip=1\baselineskip,
	breaklines=true,
	language=HTML,
	showstringspaces=false,
	basicstyle=\footnotesize\ttfamily,
	keywordstyle=\bfseries\color{green!40!black},
	commentstyle=\itshape\color{purple!40!black},
	identifierstyle=\color{blue},
	stringstyle=\color{orange},
	numbers=right,
	numbersep=1pt,
	numberstyle=\tiny\ttfamily\color{gray},
	inputencoding=utf8/latin1,
}

\lstdefinestyle{CPP}{
	belowcaptionskip=1\baselineskip,
	breaklines=true,
	language=C++,
	showstringspaces=false,
	basicstyle=\footnotesize\ttfamily,
	keywordstyle=\bfseries\color{green!40!black},
	commentstyle=\itshape\color{purple!40!black},
	identifierstyle=\color{blue},
	stringstyle=\color{orange},
	numbers=right,
	numbersep=1pt,
	numberstyle=\tiny\ttfamily\color{gray},
	inputencoding=utf8/latin1,
	tabsize=4,
}

% -- Bei 'shellesc' Problemen ab hier auskommentieren
\newtcbinputlisting[%
	auto counter,
	number within=chapter,
	list inside=lol,
	]{\inputCode}[3][]{%
	listing file={#2},
	breakable,
	enhanced,
	listing only,
	top=1mm,bottom=1mm,
	label type=listing,
	before skip=\baselineskip,
	after=\vspace{\baselineskip}\noindent,
	title=Listing~\thetcbcounter.:\ #3,#1
}
\DeclareDocumentCommand{\inputJava}{ O{} O{} O{} m }{%
	\inputCode[listing options={style=customJava,#2},#1]{#4}{#3}%
}
\DeclareDocumentCommand{\inputXML}{ O{} O{} O{} m }{%
	\inputCode[listing options={style=customXML,#2},#1]{#4}{#3}%
}
\DeclareDocumentCommand{\inputHTML}{ O{} O{} O{} m }{%
	\inputCode[listing options={style=customHTML,#2},#1]{#4}{#3}%
}
\DeclareDocumentCommand{\inputSQL}{ O{} O{} O{} m }{%
	\inputCode[listing options={style=SQL,#2},#1]{#4}{#3}%
}
\DeclareDocumentCommand{\inputJooqJava}{ O{} O{} O{} m }{%
	\inputCode[listing options={style=jooqJava,#2},#1]{#4}{#3}%
}

\DeclareDocumentCommand{\inputCPP}{ O{} O{} O{} m }{%
	\inputCode[listing options={style=CPP,#2},#1]{#4}{#3}%
}
% \newtcbinputlisting[%
% 	auto counter,
% 	number within=chapter,
% 	list inside=lol,
% 	]{\inputJava}[2][]{%
% 	listing file={#2},
% 	listing options={style=customJava},
% 	breakable,
% 	enhanced,
% 	listing only,
% 	top=1mm,bottom=1mm,
% 	label type=listing,
% 	before skip=\baselineskip,
% 	after=\vspace{\baselineskip}\noindent,
% 	title=Listing~\thetcbcounter,
% 	#1,
% }

% \newtcbinputlisting[%
% 	use counter from=inputCode,
% 	list inside=lol,
% 	]{\inputXML}[2][]{%
% 	listing file={#2},
% 	listing options={style=customXML},
% 	breakable,
% 	enhanced,
% 	listing only,
% 	top=1mm,bottom=1mm,
% 	label type=listing,
% 	before skip=\baselineskip,
% 	after=\vspace{\baselineskip}\noindent,
% 	title=Listing~\thetcbcounter,
% 	#1,
% }
% \newtcbinputlisting[%
% 	use counter from=inputCode,
% 	list inside=lol,
% 	]{\inputHTML}[2][]{%
% 	listing file={#2},
% 	listing options={style=customHTML},
% 	breakable,
% 	enhanced,
% 	listing only,
% 	top=1mm,bottom=1mm,
% 	label type=listing,
% 	before skip=\baselineskip,
% 	after=\vspace{\baselineskip}\noindent,
% 	title=Listing~\thetcbcounter,
% 	#1,
% }

% \newtcbinputlisting[%
% use counter from=inputCode,
% list inside=lol,
% ]{\inputSQL}[2][]{%
% 	listing file={#2},
% 	listing options={style=SQL},
% 	breakable,
% 	enhanced,
% 	listing only,
% 	top=1mm,bottom=1mm,
% 	label type=listing,
% 	before skip=\baselineskip,
% 	after=\vspace{\baselineskip}\noindent,
% 	title=Listing~\thetcbcounter,
% 	#1,
% }

% \newtcbinputlisting[%
% use counter from=inputCode,
% list inside=lol,
% ]{\inputJooqJava}[2][]{%
% 	listing file={#2},
% 	listing options={style=jooqJava},
% 	breakable,
% 	enhanced,
% 	listing only,
% 	top=1mm,bottom=1mm,
% 	label type=listing,
% 	before skip=\baselineskip,
% 	after=\vspace{\baselineskip}\noindent,
% 	title=Listing~\thetcbcounter,
% 	#1,
% }
% -- bis hier, stattdessen die folgende Zeile einkommentieren
% \newcommand{\inputJava}[1]{\lstinputlisting[style=customJava]{#1}}
\newcommand{\inlineJava}[1]{\lstinline[style=customJava]|#1|}
\newcommand{\inlineSQL}[1]{\lstinline[style=SQL]|#1|}
\newcommand{\inlineXML}[1]{\lstinline[style=customXML]|#1|}
\newcommand{\inlineHTML}[1]{\lstinline[style=customHTML]|#1|}

% -- für unformatierten Code
\newcommand{\code}[1]{\lstinline[basicstyle=\ttfamily]|#1|}
%----------------------------------------------------------------------------------------

%-- für eine sortierte Liste, 
%-- nach http://tex.stackexchange.com/questions/121489/alphabetically-display-the-items-in-itemize?lq=1
%----------------------------------------------------------------------------------------
\usepackage{datatool}% http://ctan.org/pkg/datatool
\newcommand{\sortitem}[2][\relax]{%
  \DTLnewrow{list}% Create a new entry
  \ifx#1\relax
    \DTLnewdbentry{list}{sortlabel}{#2}% Add entry sortlabel (no optional argument)
  \else
    \DTLnewdbentry{list}{sortlabel}{#1}% Add entry sortlabel (optional argument)
  \fi%
  \DTLnewdbentry{list}{description}{#2}% Add entry description
}
\newenvironment{sortedlist}{%
  \DTLifdbexists{list}{\DTLcleardb{list}}{\DTLnewdb{list}}% Create new/discard old list
}{%
  \DTLsort{sortlabel}{list}% Sort list
  \begin{itemize}%
    \DTLforeach*{list}{\theDesc=description}{%
      \item \theDesc}% Print each item
  \end{itemize}%
}
\newcommand{\nameitem}[3]{\sortitem[#2]{{\large#1 \textsc{#2}}, {\normalsize\email{#3}}}}
%----------------------------------------------------------------------------------------

%-- Um Autoren abschnittsweise angeben zu können
%----------------------------------------------------------------------------------------
\DTLnewdb{authors}
\renewcommand{\dtlheaderformat}[1]{\null\textbf{#1}\null}
\renewcommand{\dtldisplayafterhead}{\midrule}
\renewcommand{\dtldisplaystarttab}{\toprule}
\renewcommand{\dtldisplayendtab}{\tabularnewline \bottomrule}
\newcommand{\Chapter}[4]{%
	\chapter{#1}\vskip-1.8em%
	\label{#4}%
	\DTLnewrow{authors}%
	\DTLnewdbentry{authors}{Abschnitt}{#1}%
	\DTLnewdbentry{authors}{Autor}{#2}%
	\DTLnewdbentry{authors}{Review}{#3}%
	\DTLnewdbentry{authors}{Label}{#4}
	{\large\textsf{\textbf{Autor:}}\ \textit{#2} \quad \textsf{\textbf{Review:}}\ \textit{#3}}\\[1em]%
	}
\newcommand{\Section}[4]{%
	\section{#1}\vskip-1em%
	\label{#4}%
	\DTLnewrow{authors}%
	\DTLnewdbentry{authors}{Abschnitt}{#1}%
	\DTLnewdbentry{authors}{Autor}{#2}%
	\DTLnewdbentry{authors}{Review}{#3}%
	\DTLnewdbentry{authors}{Label}{#4}
	\textsf{\textbf{Autor:}}\ \textit{#2} \quad \textsf{\textbf{Review:}}\ \textit{#3}\\*[1em]%
	}
\newcommand{\Subsection}[4]{%
	\subsection{#1}\vskip-.8em%
	\label{#4}%
	\DTLnewrow{authors}%
	\DTLnewdbentry{authors}{Abschnitt}{#1}%
	\DTLnewdbentry{authors}{Autor}{#2}%
	\DTLnewdbentry{authors}{Review}{#3}%
	\DTLnewdbentry{authors}{Label}{#4}
	\textsf{\textbf{Autor:}}\ \textit{#2} \quad \textsf{\textbf{Review:}}\ \textit{#3}\\*[1em]%
	}
%----------------------------------------------------------------------------------------


%-- Einbindung der Protokolle 
%----------------------------------------------------------------------------------------
\usepackage{pgffor}%
\usepackage{datetime}
\usepackage{bookmark}

\newcommand{\task}[1]{\underline{\textbf{Task:} #1: }}
\newcommand{\ttreview}{$\rightarrow$ in Review}
\newcommand{\ttdone}{$\rightarrow$ done}
%----------------------------------------------------------------------------------------


%-- Inhaltsverzeichnis
%----------------------------------------------------------------------------------------
\usepackage[tocindentauto]{tocstyle}
\usetocstyle{KOMAlike}	
%----------------------------------------------------------------------------------------

%-- Protokolle einbinden
%-- Syntax:    \ExecuteMetaData[YYYY-MM-DD.tex]{protokoll}
%----------------------------------------------------------------------------------------
\usepackage{catchfilebetweentags}	% benötigt eTeX	
%----------------------------------------------------------------------------------------

%-- Für intelligente Referenzen
%----------------------------------------------------------------------------------------
\usepackage[nameinlink]{cleveref}
%----------------------------------------------------------------------------------------

%-- Kurzbefehle einlesen
%----------------------------------------------------------------------------------------
\input{shorthands.tex}
%----------------------------------------------------------------------------------------

%-- bessere Punkte
%----------------------------------------------------------------------------------------
\usepackage{ellipsis}
%----------------------------------------------------------------------------------------
